<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundo Pentagrama: El Portal Musical de Primaria</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png"> 
    
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración para usar la fuente Inter -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
        }
        html, body {
            height: 100%; 
            margin: 0;
            overflow-y: hidden;
        }
        
        .content-area {
            position: absolute;
            top: 4rem;
            bottom: 0;
            right: 0;
            left: 0;
            overflow: hidden;
            -webkit-overflow-scrolling: touch;
        }
        #app-iframe-container, #app-iframe {
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- 1. Encabezamiento -->
    <header id="header" class="fixed top-0 left-0 right-0 h-16 bg-sky-600 w-full text-white shadow-lg z-20 flex items-center justify-between px-4 lg:px-8">
        <div class="flex items-center space-x-3">
            <button id="menu-toggle" class="p-2 lg:hidden rounded-lg hover:bg-sky-500 transition duration-150" aria-label="Abrir Menú de Aplicaciones">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            </button>
            
            <div class="w-10 h-10 bg-yellow-400 rounded-lg flex items-center justify-center shadow-md overflow-hidden">
                <img src="logo-pentagrama.png" onerror="this.src='https://placehold.co/40x40/FACC15/0369A1?text=MP'" alt="Icono de Mundo Pentagrama" class="w-full h-full object-cover p-1">
            </div>
            
            <h1 class="text-xl md:text-2xl font-extrabold tracking-tight">
                Mundo Pentagrama
            </h1>
        </div>
        <div class="text-sm hidden sm:block font-medium">
            ¡El Portal Musical de Primaria!
        </div>
    </header>

    <!-- 2. Índice/Menú de Navegación -->
    <nav id="sidebar" class="fixed top-16 left-0 bottom-0 w-72 bg-white shadow-xl z-30 flex flex-col transition-all duration-300 transform -translate-x-full lg:translate-x-0 border-r border-gray-200">
        <div class="flex-1 overflow-y-auto p-2 space-y-1" id="app-buttons-container">
            <!-- Los botones se insertan aquí con JavaScript -->
        </div>
    </nav>

    <!-- 3. Cuerpo/Contenido Variable -->
    <main id="content" class="lg:ml-72 content-area bg-slate-50">
        
        <!-- Bienvenida -->
        <div id="welcome-page" class="p-4 lg:p-8 overflow-y-auto h-full">
            <div class="max-w-4xl mx-auto py-6 lg:py-10">
                <div class="bg-white p-6 md:p-12 rounded-3xl shadow-xl border-t-8 border-sky-500 ring-1 ring-gray-100">
                    <header class="mb-8 text-center md:text-left">
                        <h2 id="content-title" class="text-3xl md:text-5xl font-extrabold text-slate-800 mb-3 tracking-tight">
                            ¡Bienvenido/a!
                        </h2>
                        <p id="content-subtitle" class="text-xl md:text-2xl text-sky-600 font-semibold">El portal donde la música cobra vida.</p>
                    </header>
                    
                    <section class="mb-10">
                        <div id="content-text" class="text-gray-600 leading-relaxed text-lg space-y-6">
                            <!-- El contenido se inserta aquí por JavaScript -->
                        </div>
                    </section>
                    
                    <footer class="text-center mt-8 pt-6 border-t border-gray-100">
                        <p class="text-xs font-semibold text-gray-400 uppercase tracking-widest">
                            © 2025 Mundo Pentagrama | Portal Educativo | Álvaro Ramírez
                        </p>
                    </footer>
                </div>
            </div>
        </div>

        <!-- Iframe -->
        <div id="app-iframe-container" class="hidden w-full h-full bg-white">
            <iframe id="app-iframe" class="w-full h-full border-0 bg-white" src="" title="Aplicación Musical Interactiva" frameborder="0"></iframe>
        </div>
        
    </main>

    <script>
        /**
         * DEFINICIÓN DE ICONOS
         */
        
        // Lucide Standard Icons (ViewBox 0 0 24 24, Stroke)
        const homeIcon = '<path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>';
        const musicIcon = '<path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/>';
        const drumIcon = '<path d="m2 2 8 8"/><path d="m22 2-8 8"/><ellipse cx="12" cy="9" rx="10" ry="5"/><path d="M7 13.4v7.9"/><path d="M12 14v8"/><path d="M17 13.4v7.9"/><path d="M2 9v8a10 5 0 0 0 20 0V9"/>';
        const micIcon = '<path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/>';
        const gridIcon = '<rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/>';
        const heartIcon = '<path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>';
        const wavesIcon = '<path d="M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"/><path d="M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"/><path d="M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1"/>';

        // Icono "C" mayúscula para Compás Maestro
        const cIcon = '<path d="M17 6.1a9 9 0 1 0 0 11.8" />';

        // Phosphor Metronome (Specific ViewBox 0 0 256 256, Fill)
        const metronomeIcon = '<path d="M187.14,114.84l26.78-29.46a8,8,0,0,0-11.84-10.76l-20.55,22.6-17.2-54.07A15.94,15.94,0,0,0,149.08,32H106.91A15.94,15.94,0,0,0,91.66,43.15l-50.91,160A16,16,0,0,0,56,224H200a16,16,0,0,0,15.25-20.85ZM184.72,160H146.08l28.62-31.48ZM106.91,48h42.17l20,62.9L124.46,160H71.27ZM56,208l10.18-32H189.81L200,208Z"></path>';
        
        // Xilófono Personalizado (Barras descendentes - 5 barras ahora)
        const xylophoneIcon = '<path d="M4 22V2"/><path d="M8 20V4"/><path d="M12 18V6"/><path d="M16 16V8"/><path d="M20 14V10"/>';

        // Lucide Guitar (Updated by User)
        const guitarIcon = '<path d="m11.9 12.1 4.514-4.514"/><path d="M20.1 2.3a1 1 0 0 0-1.4 0l-1.114 1.114A2 2 0 0 0 17 4.828v1.344a2 2 0 0 1-.586 1.414A2 2 0 0 1 17.828 7h1.344a2 2 0 0 0 1.414-.586L21.7 5.3a1 1 0 0 0 0-1.4z"/><path d="m6 16 2 2"/><path d="M8.23 9.85A3 3 0 0 1 11 8a5 5 0 0 1 5 5 3 3 0 0 1-1.85 2.77l-.92.38A2 2 0 0 0 12 18a4 4 0 0 1-4 4 6 6 0 0 1-6-6 4 4 0 0 1 4-4 2 2 0 0 0 1.85-1.23z"/>';


        // LÓGICA PRINCIPAL
        document.addEventListener('DOMContentLoaded', () => {
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.getElementById('menu-toggle');
            const appButtonsContainer = document.getElementById('app-buttons-container');
            
            const welcomePage = document.getElementById('welcome-page');
            const iframeContainer = document.getElementById('app-iframe-container');
            const appIframe = document.getElementById('app-iframe');
            const contentTextDiv = document.getElementById('content-text');

            const navLinks = [
                // type: 'fill' para iconos rellenos, 'stroke' (defecto) para líneas.
                // viewBox: dimensiones del SVG original.
                { id: 'app-bienvenida', title: 'Inicio', path: homeIcon, active: true, isApp: false, color: 'text-sky-600' },
                { id: 'app-ritmo-compas', title: 'Ritmo y Compás', path: metronomeIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/compases/', color: 'text-indigo-500', type: 'fill', viewBox: '0 0 256 256' },
                { id: 'app-compas', title: 'Compás Maestro', path: cIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/compasmaestro/', color: 'text-purple-500' },
                { id: 'app-ritmo-melodia', title: 'Ritmo y Melodía', path: musicIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/ritmoymelodia/', color: 'text-pink-500' },
                { id: 'app-instrumentos', title: 'Instrumentos', path: drumIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/instrumentos/', color: 'text-amber-500' },
                { id: 'app-clasif-vocal', title: 'Mundo de Voces', path: micIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/voces/', color: 'text-red-500' },
                { id: 'app-xilofono', title: 'Xilófono Virtual', path: xylophoneIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/xilofono/', color: 'text-lime-600' },
                { id: 'app-ukemaster', title: 'UkeMaster', path: guitarIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/ukemaster/', color: 'text-orange-500' },
                { id: 'app-beatmaker', title: 'Beat Maker', path: gridIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/beatmaker/', color: 'text-cyan-500' },
                { id: 'app-emociones', title: 'Emociones', path: heartIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/emociones/', color: 'text-rose-500' },
                { id: 'app-paisaje-sonoro', title: 'Paisaje Sonoro', path: wavesIcon, active: false, isApp: true, url: 'https://alvramirezp.github.io/paisajesonoro/', color: 'text-teal-500' },
            ];

            const welcomeContent = {
                title: '¡Te doy la bienvenida a Mundo Pentagrama!',
                subtitle: 'El portal educativo que transforma el aprendizaje musical.',
                text: [
                    `<p><b>Mundo Pentagrama</b> es el lugar perfecto para descubrir el maravilloso mundo de la música: las notas, los ritmos, los instrumentos musicales…</p>`,
                    `<p>Este portal interactivo está diseñado para alumnos y alumnas de <b>Educación Primaria</b>, haciendo que el aprendizaje de la música sea <b>divertido y práctico</b>: desde aprender a tocar el xilófono virtual hasta entender los ritmos más complicados.</p>`,
                    `<p>Utiliza el <b>menú de la izquierda</b> para elegir la aplicación que quieras explorar hoy. Cada botón te llevará a un desafío musical nuevo y divertido.</p>`,
                    `<p class="text-xl font-extrabold text-sky-600">¡Elige tu primera aventura y que empiece la música!</p>`
                ].join('')
            };

            const updateContent = (link) => {
                 if (link.isApp) {
                    welcomePage.classList.add('hidden');
                    iframeContainer.classList.remove('hidden');
                    appIframe.src = link.url;
                    appIframe.title = `Aplicación: ${link.title}`;
                } else {
                    iframeContainer.classList.add('hidden');
                    welcomePage.classList.remove('hidden');
                    document.getElementById('content-title').textContent = welcomeContent.title;
                    document.getElementById('content-subtitle').textContent = welcomeContent.subtitle;
                    contentTextDiv.innerHTML = welcomeContent.text;
                }
            };

            const toggleMenu = () => {
                sidebar.classList.toggle('-translate-x-full'); 
            };

            if (menuToggle) {
                menuToggle.addEventListener('click', toggleMenu);
            }

            const renderButtons = () => {
                appButtonsContainer.innerHTML = '';
                navLinks.forEach(link => {
                    const isActive = link.active;
                    
                    const button = document.createElement('button');
                    button.id = link.id;
                    button.className = `group w-full flex items-center p-2 rounded-xl transition-all duration-200 text-left border ${
                        isActive 
                            ? 'bg-sky-50 border-sky-100 shadow-sm' 
                            : 'bg-white border-transparent hover:bg-gray-50'
                    }`;
                    
                    const iconContainerClass = `w-10 h-10 min-w-[2.5rem] flex items-center justify-center rounded-lg mr-3 transition-colors ${
                        isActive ? 'bg-white shadow-sm' : 'bg-gray-100 group-hover:bg-white group-hover:shadow-sm'
                    }`;

                    // Lógica para manejar iconos de relleno (fill) o trazo (stroke) y distintos viewBox
                    const type = link.type || 'stroke';
                    const viewBox = link.viewBox || '0 0 24 24';
                    
                    const fillClass = type === 'fill' 
                        ? 'fill-current stroke-none' 
                        : 'fill-none stroke-current stroke-2';

                    const svgClass = `w-6 h-6 ${link.color} ${fillClass}`;

                    button.innerHTML = `
                        <div class="${iconContainerClass}">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="${viewBox}" stroke-linecap="round" stroke-linejoin="round" class="${svgClass}">
                                ${link.path}
                            </svg>
                        </div>
                        <span class="text-sm font-semibold ${isActive ? 'text-gray-900' : 'text-gray-500 group-hover:text-gray-700'}">
                            ${link.title}
                        </span>
                        ${isActive ? '<div class="ml-auto w-1.5 h-1.5 rounded-full bg-sky-500"></div>' : ''}
                    `;
                    
                    button.addEventListener('click', () => {
                        navLinks.forEach(l => l.active = (l.id === link.id));
                        const selectedLink = navLinks.find(l => l.id === link.id);
                        updateContent(selectedLink); 
                        renderButtons();
                        if (window.innerWidth < 1024) { 
                            toggleMenu();
                        }
                    });

                    appButtonsContainer.appendChild(button);
                });
            };

            renderButtons();
            updateContent(navLinks.find(l => l.active));
        });
    </script>
</body>
</html>
